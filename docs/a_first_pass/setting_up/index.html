<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>Setting up - `glurmo` by example</title>
<meta name="description" content="A brief guide to using the `glurmo` command line utility">
<meta name="generator" content="Hugo 0.133.1">
<link href="https://example.com//index.xml" rel="alternate" type="application/rss+xml">
<link rel="canonical" href="https://example.com/a_first_pass/setting_up/">
<link rel="stylesheet" href="https://example.com/css/theme.min.css">
<link rel="stylesheet" href="https://example.com/css/chroma.min.css">
<script defer src="https://example.com//js/fontawesome6/all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js" integrity="sha256-H3cjtrm/ztDeuhCN9I4yh4iN2Ybx/y1RM7rMmAesA0k=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js" integrity="sha256-4XodgW4TwIJuDtf+v6vDJ39FVxI0veC/kSCCmnFp7ck=" crossorigin="anonymous"></script>
<script src="https://example.com/js/bundle.js"></script><style>
:root {--custom-background-color: #34a4eb;}
</style>
<meta property="og:url" content="https://example.com/a_first_pass/setting_up/">
  <meta property="og:site_name" content="`glurmo` by example">
  <meta property="og:title" content="Setting up">
  <meta property="og:description" content="Setting up the simulation In order to run the simulations, we must set up the directory. This entails glurmo creating the actual scripts and slurm scripts, as well as setting up the general directory structure. To set up the directory, ensure your current directory is simple-lm, and then run:
$ glurmo -s . Note that you can also run setup from a different directory, as the final argument is simply the path to whichever directory you’d like to run glurmo on.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="a_first_pass">
    <meta property="article:published_time" content="2024-09-02T10:02:51-04:00">
    <meta property="article:modified_time" content="2024-09-02T10:02:51-04:00">
    <meta property="og:image" content="https://example.com/images/og-image.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://example.com/images/og-image.png">
  <meta name="twitter:title" content="Setting up">
  <meta name="twitter:description" content="Setting up the simulation In order to run the simulations, we must set up the directory. This entails glurmo creating the actual scripts and slurm scripts, as well as setting up the general directory structure. To set up the directory, ensure your current directory is simple-lm, and then run:
$ glurmo -s . Note that you can also run setup from a different directory, as the final argument is simply the path to whichever directory you’d like to run glurmo on.">

  <meta itemprop="name" content="Setting up">
  <meta itemprop="description" content="Setting up the simulation In order to run the simulations, we must set up the directory. This entails glurmo creating the actual scripts and slurm scripts, as well as setting up the general directory structure. To set up the directory, ensure your current directory is simple-lm, and then run:
$ glurmo -s . Note that you can also run setup from a different directory, as the final argument is simply the path to whichever directory you’d like to run glurmo on.">
  <meta itemprop="datePublished" content="2024-09-02T10:02:51-04:00">
  <meta itemprop="dateModified" content="2024-09-02T10:02:51-04:00">
  <meta itemprop="wordCount" content="504">
  <meta itemprop="image" content="https://example.com/images/og-image.png"></head>
<body><div class="container"><header>
<h1>`glurmo` by example</h1><span class="version">Version 0.1</span><a href="https://github.com/nateosher/glurmo-examples" class="github"><i class="fab fa-github"></i></a>
<p class="description">A brief guide to using the `glurmo` command line utility</p>

</header>


<div class="content-container">
<main><h1>Setting up</h1>
<h1 id="setting-up-the-simulation">Setting up the simulation</h1>
<p>In order to run the simulations, we must set up the directory. This entails <code>glurmo</code> creating the actual scripts and slurm scripts, as well as setting up the general directory structure. To set up the directory, ensure your current directory is <code>simple-lm</code>, and then run:</p>
<pre tabindex="0"><code>$ glurmo -s .
</code></pre><p>Note that you can also run setup from a different directory, as the final argument is simply the path to whichever directory you&rsquo;d like to run <code>glurmo</code> on. If you run <code>ls</code>, you should see the following new sub-directories: <code>results</code>, <code>scripts</code>, <code>slurm</code>, <code>slurm_errors</code>, and <code>slurm_out</code>. We&rsquo;ll go over each directory in turn.</p>
<h2 id="results-slurm_errors-and-slurm_out"><code>results</code>, <code>slurm_errors</code>, and <code>slurm_out</code></h2>
<p>These directories will store various outputs from your simulation studies. Right now, they should be empty- we&rsquo;ll discuss these more in the next section, though you can probably guess what will be stored in each one.</p>
<h2 id="scripts"><code>scripts</code></h2>
<p>The scripts directory is a bit more interesting. As of now, it should contain five scripts: <code>script_0.R</code> through <code>script_4.R</code>. Let&rsquo;s take a look at <code>script_2.R</code>:</p>
<pre tabindex="0"><code>set.seed(24601 + 2)

#----------------------------------
# General settings
#----------------------------------
N = 100
beta_0 = 1
beta_1 = 2

#----------------------------------
# X
#----------------------------------
X_sigma = 2
X_mu = 0
X = rnorm(N, X_mu, X_sigma)

#----------------------------------
# y
#----------------------------------
epsilon_sigma = 1
epsilon = rnorm(N, 0, epsilon_sigma)
y = beta_0 + beta_1 * X + epsilon


#----------------------------------
# Model
#----------------------------------
sim_data = data.frame(y = y, X = X)
lm_fit = lm(y ~ X, data = sim_data)



saveRDS(lm_fit, &#34;/home/oshern/Projects/glurmo-examples/simple-lm/results/results___2.RData&#34;)
</code></pre><p>As promised, the templating markdown has been replaced with the parameters. Further, note that the {{.index}} markdown was replaced with &ldquo;2&rdquo;, since this is the second script. And similarly, the {{.results_path}} markdown has been replaced by a path to the current directory that should end in  &ldquo;/results/result___2&rdquo;, followed by the {{.result_extension}} &ldquo;.RData&rdquo;. We now have R scripts that are ready to be run, which we will do in the next section.</p>
<h2 id="slurm"><code>slurm</code></h2>
<p>The <code>slurm</code> directory stores the slurm scripts for each simulation. This is quite analogous to Let&rsquo;s take a look at <code>slurm_2</code>:</p>
<pre tabindex="0"><code>#!/bin/sh

#SBATCH --job-name=simple_lm___2
#SBATCH --time=00:01:00
#SBATCH --mail-user=your.email@university.edu
#SBATCH --mail-type=END,FAIL
#SBATCH --mem=4g
#SBATCH --cpus-per-task=1
#SBATCH -e &#34;/home/oshern/Projects/glurmo-examples/simple-lm/slurm_errors/error___2&#34;
#SBATCH -o &#34;/home/oshern/Projects/glurmo-examples/simple-lm/slurm_out/output___2&#34;

R CMD BATCH --no-save --no-restore /home/oshern/Projects/glurmo-examples/simple-lm/scripts/script_2.R /home/oshern/Projects/glurmo-examples/simple-lm/slurm_out/output___2.Rout
</code></pre><p>Just as you might expect, the markdown has been replaced with the simulation settings or script specific variables.</p>
<h1 id="conclusions">Conclusions</h1>
<p>We are now ready to run the simulations themselves, which we will do in the next section. But first I think it&rsquo;s worth highlighting a strength of <code>glurmo</code>, even in a simple setting like this. The nice thing about <code>glurmo</code> is that it makes it extremely easy to produce simulation studies that are well-organized and have a common structure. This is particularly useful when organizing the outputs, as we&rsquo;ll see in the next section. It&rsquo;s also worth emphasizing how re-usable much of this is: we could very easily spin up an entirely different simulation study with the same slurm_template, so long as we keep the variables in the <code>settings.json</code> file. I do this all the time in my own work!</p>
<div class="edit-meta">
Last updated on 2 Sep 2024


<br>
Published on 2 Sep 2024
<br><a href="https://github.com/thingsym/hugo-theme-techdoc/edit/master/a_first_pass/setting_up.md" class="edit-page"><i class="fas fa-pen-square"></i>&nbsp;Edit on GitHub</a></div><nav class="pagination"><a class="nav nav-prev" href="https://example.com/a_first_pass/settings_files/" title="Configuration files"><i class="fas fa-arrow-left" aria-hidden="true"></i>&nbsp;Prev - Configuration files</a>
<a class="nav nav-next" href="https://example.com/a_first_pass/running/" title="Running">Next - Running <i class="fas fa-arrow-right" aria-hidden="true"></i></a>
</nav><footer><p class="powered">Powered by <a href="https://gohugo.io">Hugo</a>. Theme by <a href="https://themes.gohugo.io/hugo-theme-techdoc/">TechDoc</a>. Designed by <a href="https://github.com/thingsym/hugo-theme-techdoc">Thingsym</a>.</p>
</footer>
</main>
<div class="sidebar">

<nav class="open-menu">
<ul>
<li class=""><a href="https://example.com/">Home</a></li>

<li class=""><a href="https://example.com/getting_started/">Getting started</a>
  
</li>

<li class="parent"><a href="https://example.com/a_first_pass/">A first pass</a>
  
<ul class="sub-menu">
<li class=""><a href="https://example.com/a_first_pass/settings_files/">Configuration files</a></li>
<li class="active"><a href="https://example.com/a_first_pass/setting_up/">Setting up</a></li>
<li class=""><a href="https://example.com/a_first_pass/running/">Running</a></li>
<li class=""><a href="https://example.com/a_first_pass/conclusion/">Conclusion</a></li>
</ul>
  
</li>

<li class=""><a href="https://example.com/parameter_vectors/">Parameter vectors</a>
  
</li>

<li class=""><a href="https://example.com/multiple_parameter_vectors/">Multiple parameter vectors</a>
  
</li>

<li class=""><a href="https://example.com/templating_logic/">Templating logic</a>
  
</li>
</ul>
</nav>



<div class="sidebar-footer"></div>
</div>

</div><a href="#" id="backtothetop-fixed" class="backtothetop"
 data-backtothetop-duration="600"
 data-backtothetop-easing="easeOutQuart"
 data-backtothetop-fixed-fadeIn="1000"
 data-backtothetop-fixed-fadeOut="1000"
 data-backtothetop-fixed-bottom="10"
 data-backtothetop-fixed-right="20">
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>
